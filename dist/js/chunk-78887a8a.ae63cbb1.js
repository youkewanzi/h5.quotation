(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78887a8a"],{"0a08":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAACW0lEQVRIS8WWPW8TQRCG3zlDg2hACPkfUEGBA0TiQygECXro+dB518ZIdBAJKpBIiQRYu3ci0EMNRSBCkALihAIa+Ad2gaBAaQ7fi9Y6G9sk91HYbLsz8+zM7s68gikvycMLw7ASx/EFACcAHACwJ/H7CeArgFXP8174vr+RFS8VaIw5IyL3ARzJCpTst0guaK3fbGe/JdBauwvAIwCXAOSqwhCAJJ+JSEMptTkO/ieYtXYfgJcFstoumVYURecbjcb3YYMRYJLZ2zQYyV8i8sEFITkrIrtTyt0CcHo40xGgMWZJRC5n3NcXpdQhZ2Ot/QzgYIb9klLqat9mAEweyHKOOysKpOd5877vrzjoABgEwUeSR3O8xqJAiMhatVo9NgA2m81KqVRazwFzJoWBzqnb7c7U6/WNXobGmEURuTlJIIBFpdRCH/hORE5OEkjyvdb6VA9ore0A2D9JIICOUqrcB0YAdkwSSPK31nrn/wEaYzoiMr2SGmOm/mjcCLqV5w5JtgE8SGxviEg5j9/Ityj48V3T/tbrGiJuGOddFaXUp8KtjeRKu90+6yjlcnlZROayiCTXtNZ/W5tzCMNwLo7j11nNm2RTa33N+QRB8JhkPQPIOI7na7XaaPNOGsATAFcyAmySvJOU9C4Apw7S1tbjKQE659QBnFW+sf30AZxAncR4BWCmYPBx8/Uois6lSoy+RyI1HgJw07+wiALwFMD1XCJq+JhOBQC4JyKzebIl6bTO7cIycTy4tfYwgIskjydCeG/yaH4AcH9yFcBz98+yDla0XFnxMvf/ACLQJyxhZgyxAAAAAElFTkSuQmCC"},"1ed2":function(t,e,i){t.exports=i.p+"img/wechat.9868cb5c.png"},"430c":function(t,e,i){t.exports=i.p+"img/date.34ee7370.png"},"9b35":function(t,e,i){t.exports=i.p+"img/mail.8afe4167.png"},a1d8:function(t,e,i){t.exports=i.p+"img/logo.404d84d9.png"},cdf9:function(t,e,i){t.exports=i.p+"img/from.e202330f.png"},d6f7:function(t,e,i){t.exports=i.p+"img/address.90c10bba.png"},f8bd:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-container quota"},[n("div",{staticClass:"tip"},[n("img",{staticClass:"icon",attrs:{src:i("0a08")}}),n("span",{staticClass:"text"},[t._v("报价单Logo会优先从历史记录中获取")]),n("button",{staticClass:"btn-log",on:{click:t.handleLog}},[t._v("记录")])]),n("div",{ref:"content",staticClass:"content-container"},[n("div",{staticClass:"content-wrap"},[n("div",{staticClass:"company common-wrap"},[n("div",{staticClass:"item"},[n("van-uploader",{staticClass:"logo",attrs:{"after-read":t.handleLogo}},[[n("img",{attrs:{src:t.company_logo,alt:"logo"}})]],2),n("div",{staticClass:"value"},[n("div",{staticClass:"name zh"},[n("van-field",{attrs:{type:"text",placeholder:"请输入公司名称"},model:{value:t.info.company_name_zh,callback:function(e){t.$set(t.info,"company_name_zh",e)},expression:"info.company_name_zh"}})],1),n("div",{staticClass:"name cn"},[n("van-field",{attrs:{type:"text",placeholder:"请输入公司英文名称"},model:{value:t.info.company_name_cn,callback:function(e){t.$set(t.info,"company_name_cn",e)},expression:"info.company_name_cn"}})],1)])],1),n("div",{staticClass:"item"},[t._m(0),n("div",{staticClass:"value"},[n("van-field",{attrs:{type:"text",placeholder:"请输入公司地址/Address"},model:{value:t.info.company_address,callback:function(e){t.$set(t.info,"company_address",e)},expression:"info.company_address"}})],1)]),n("div",{staticClass:"item"},[t._m(1),n("div",{staticClass:"value"},[n("van-field",{attrs:{type:"text",placeholder:"请输入致/TO"},model:{value:t.info.to,callback:function(e){t.$set(t.info,"to",e)},expression:"info.to"}})],1)]),n("div",{staticClass:"item"},[t._m(2),n("div",{staticClass:"value"},[n("span",{on:{click:function(e){t.showToDate=!0}}},[t._v(t._s(t.formatDate(t.info.to_date)))]),n("van-calendar",{attrs:{"show-confirm":!1,color:"#007BFF"},on:{select:t.handleToDate},model:{value:t.showToDate,callback:function(e){t.showToDate=e},expression:"showToDate"}})],1)]),n("div",{staticClass:"item"},[t._m(3),n("div",{staticClass:"value"},[n("van-field",{attrs:{type:"text",placeholder:"请输入自/From"},model:{value:t.info.from,callback:function(e){t.$set(t.info,"from",e)},expression:"info.from"}})],1)]),n("div",{staticClass:"item"},[t._m(4),n("div",{staticClass:"value"},[n("van-field",{attrs:{type:"text",placeholder:"请输入电话/微信"},model:{value:t.info.phone,callback:function(e){t.$set(t.info,"phone",e)},expression:"info.phone"}})],1)])]),n("div",{staticClass:"ship common-wrap"},[n("div",{staticClass:"tips"},[t._v("感谢您的询价，我们将会为您提供最优的运价解决方案和最优质的服务，根据您提供的货物信息，我司报价如下：")]),n("div",{staticClass:"content"},[n("table",[n("tr",[n("td",[t._v("起运港/POL：")]),n("td",[n("van-field",{attrs:{type:"text"},model:{value:t.info.start_port,callback:function(e){t.$set(t.info,"start_port",e)},expression:"info.start_port"}})],1)]),n("tr",[n("td",[t._v("目的港/POD：")]),n("td",[n("van-field",{attrs:{type:"text"},model:{value:t.info.end_port,callback:function(e){t.$set(t.info,"end_port",e)},expression:"info.end_port"}})],1)]),n("tr",[n("td",[t._v("船公司：")]),n("td",[n("van-field",{attrs:{type:"text"},model:{value:t.info.ship_company,callback:function(e){t.$set(t.info,"ship_company",e)},expression:"info.ship_company"}})],1)]),n("tr",[n("td",[t._v("船期：")]),n("td",[t.info.close_time?[n("span",{on:{click:function(e){t.showCloseTime=!0}}},[t._v(t._s(t.formatDate(t.info.close_time)))])]:n("span",{staticStyle:{color:"#999"},on:{click:function(e){t.showCloseTime=!0}}},[t._v("点击选择日期")]),n("van-calendar",{attrs:{"show-confirm":!1,color:"#007BFF"},on:{select:t.handleCloseTime},model:{value:t.showCloseTime,callback:function(e){t.showCloseTime=e},expression:"showCloseTime"}})],2)]),n("tr",[n("td",[t._v("运价有限期：")]),n("td",[t.info.start_time&&t.info.end_time?[n("span",{on:{click:function(e){t.showRangeTime=!0}}},[t._v(t._s(t.formatDate(t.info.start_time))+" ~ "+t._s(t.formatDate(t.info.end_time)))])]:n("span",{staticStyle:{color:"#999"},on:{click:function(e){t.showRangeTime=!0}}},[t._v("点击选择日期")]),n("van-calendar",{attrs:{type:"range","show-confirm":!1,color:"#007BFF"},on:{select:t.handleRangeTime},model:{value:t.showRangeTime,callback:function(e){t.showRangeTime=e},expression:"showRangeTime"}})],2)])])])]),n("div",{staticClass:"price common-wrap"},[n("div",{staticClass:"title"},[t._v("柜量/柜型")]),n("div",{staticClass:"content"},[n("table",[t._m(5),n("tr",[n("td",[t._v("20GP")]),n("td",[n("van-field",{attrs:{type:"number"},on:{change:t.calcTransPrice},model:{value:t.info.gp20_count,callback:function(e){t.$set(t.info,"gp20_count",e)},expression:"info.gp20_count"}})],1),n("td",[n("van-field",{attrs:{type:"number"},model:{value:t.info.gp20_weight,callback:function(e){t.$set(t.info,"gp20_weight",e)},expression:"info.gp20_weight"}})],1),n("td",[n("van-switch",{attrs:{"active-value":"1","inactive-value":"0",size:"24px"},model:{value:t.info.gp20_is_w,callback:function(e){t.$set(t.info,"gp20_is_w",e)},expression:"info.gp20_is_w"}})],1)]),n("tr",[n("td",[t._v("40GP")]),n("td",[n("van-field",{attrs:{type:"number"},on:{change:t.calcTransPrice},model:{value:t.info.gp40_count,callback:function(e){t.$set(t.info,"gp40_count",e)},expression:"info.gp40_count"}})],1),n("td",[n("van-field",{attrs:{type:"number"},model:{value:t.info.gp40_weight,callback:function(e){t.$set(t.info,"gp40_weight",e)},expression:"info.gp40_weight"}})],1),n("td",[n("van-switch",{attrs:{"active-value":"1","inactive-value":"0",size:"24px"},model:{value:t.info.gp40_is_w,callback:function(e){t.$set(t.info,"gp40_is_w",e)},expression:"info.gp40_is_w"}})],1)]),n("tr",[n("td",[t._v("40HQ")]),n("td",[n("van-field",{attrs:{type:"number"},on:{change:t.calcTransPrice},model:{value:t.info.hq40_count,callback:function(e){t.$set(t.info,"hq40_count",e)},expression:"info.hq40_count"}})],1),n("td",[n("van-field",{attrs:{type:"number"},model:{value:t.info.hq40_weight,callback:function(e){t.$set(t.info,"hq40_weight",e)},expression:"info.hq40_weight"}})],1),n("td",[n("van-switch",{attrs:{"active-value":"1","inactive-value":"0",size:"24px"},model:{value:t.info.hq40_is_w,callback:function(e){t.$set(t.info,"hq40_is_w",e)},expression:"info.hq40_is_w"}})],1)])])])]),n("div",{staticClass:"price common-wrap"},[n("div",{staticClass:"title"},[t._v("费用明细")]),n("div",{staticClass:"content"},[n("table",[t._m(6),n("tr",[n("td",[n("span",{staticClass:"query",on:{click:function(e){return t.queryPrice("yunjia")}}},[t._v("运费(O/F)")])]),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"transPrice")}},model:{value:t.info.price_json.transPrice.gp20,callback:function(e){t.$set(t.info.price_json.transPrice,"gp20",e)},expression:"info.price_json.transPrice.gp20"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"transPrice")}},model:{value:t.info.price_json.transPrice.gp40,callback:function(e){t.$set(t.info.price_json.transPrice,"gp40",e)},expression:"info.price_json.transPrice.gp40"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"transPrice")}},model:{value:t.info.price_json.transPrice.hq40,callback:function(e){t.$set(t.info.price_json.transPrice,"hq40",e)},expression:"info.price_json.transPrice.hq40"}})],1),n("td",[t._v(t._s(t.info.price_json.transPrice.sum))])]),t._l(t.info.price_json.portSurcharge||[],(function(e,i){return n("tr",{key:i},[n("td",[t._v(t._s(e.title))]),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(i,"portSurcharge")}},model:{value:e.list.gp20,callback:function(i){t.$set(e.list,"gp20",i)},expression:"item.list.gp20"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(i,"portSurcharge")}},model:{value:e.list.gp40,callback:function(i){t.$set(e.list,"gp40",i)},expression:"item.list.gp40"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(i,"portSurcharge")}},model:{value:e.list.hq40,callback:function(i){t.$set(e.list,"hq40",i)},expression:"item.list.hq40"}})],1),n("td",[t._v(t._s(e.list.sum))])])})),t._l(t.info.price_json.companySurcharge||[],(function(e,i){return n("tr",{key:i+100},[n("td",[t._v(t._s(e.title))]),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(i,"companySurcharge")}},model:{value:e.list.gp20,callback:function(i){t.$set(e.list,"gp20",i)},expression:"item.list.gp20"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(i,"companySurcharge")}},model:{value:e.list.gp40,callback:function(i){t.$set(e.list,"gp40",i)},expression:"item.list.gp40"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(i,"companySurcharge")}},model:{value:e.list.hq40,callback:function(i){t.$set(e.list,"hq40",i)},expression:"item.list.hq40"}})],1),n("td",[t._v(t._s(e.list.sum))])])})),n("tr",[n("td",[n("span",{staticClass:"query",on:{click:function(e){return t.queryPrice("tuoche")}}},[t._v("拖车费")])]),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"carPrice")}},model:{value:t.info.price_json.carPrice.gp20,callback:function(e){t.$set(t.info.price_json.carPrice,"gp20",e)},expression:"info.price_json.carPrice.gp20"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"carPrice")}},model:{value:t.info.price_json.carPrice.gp40,callback:function(e){t.$set(t.info.price_json.carPrice,"gp40",e)},expression:"info.price_json.carPrice.gp40"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"carPrice")}},model:{value:t.info.price_json.carPrice.hq40,callback:function(e){t.$set(t.info.price_json.carPrice,"hq40",e)},expression:"info.price_json.carPrice.hq40"}})],1),n("td",[t._v(t._s(t.info.price_json.carPrice.sum))])]),n("tr",[n("td",[n("span",{staticClass:"query",on:{click:function(e){return t.queryPrice("baoguan")}}},[t._v("报关费")])]),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"customerPrice")}},model:{value:t.info.price_json.customerPrice.gp20,callback:function(e){t.$set(t.info.price_json.customerPrice,"gp20",e)},expression:"info.price_json.customerPrice.gp20"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"customerPrice")}},model:{value:t.info.price_json.customerPrice.gp40,callback:function(e){t.$set(t.info.price_json.customerPrice,"gp40",e)},expression:"info.price_json.customerPrice.gp40"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"customerPrice")}},model:{value:t.info.price_json.customerPrice.hq40,callback:function(e){t.$set(t.info.price_json.customerPrice,"hq40",e)},expression:"info.price_json.customerPrice.hq40"}})],1),n("td",[t._v(t._s(t.info.price_json.customerPrice.sum))])]),n("tr",[t._m(7),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"storagePrice")}},model:{value:t.info.price_json.storagePrice.gp20,callback:function(e){t.$set(t.info.price_json.storagePrice,"gp20",e)},expression:"info.price_json.storagePrice.gp20"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"storagePrice")}},model:{value:t.info.price_json.storagePrice.gp40,callback:function(e){t.$set(t.info.price_json.storagePrice,"gp40",e)},expression:"info.price_json.storagePrice.gp40"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"storagePrice")}},model:{value:t.info.price_json.storagePrice.hq40,callback:function(e){t.$set(t.info.price_json.storagePrice,"hq40",e)},expression:"info.price_json.storagePrice.hq40"}})],1),n("td",[t._v(t._s(t.info.price_json.storagePrice.sum))])]),n("tr",[t._m(8),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"otherPrice")}},model:{value:t.info.price_json.otherPrice.gp20,callback:function(e){t.$set(t.info.price_json.otherPrice,"gp20",e)},expression:"info.price_json.otherPrice.gp20"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"otherPrice")}},model:{value:t.info.price_json.otherPrice.gp40,callback:function(e){t.$set(t.info.price_json.otherPrice,"gp40",e)},expression:"info.price_json.otherPrice.gp40"}})],1),n("td",[n("van-field",{attrs:{type:"number"},on:{change:function(e){return t.subTotal(e,"otherPrice")}},model:{value:t.info.price_json.otherPrice.hq40,callback:function(e){t.$set(t.info.price_json.otherPrice,"hq40",e)},expression:"info.price_json.otherPrice.hq40"}})],1),n("td",[t._v(t._s(t.info.price_json.otherPrice.sum))])]),n("tr",[n("td",{staticClass:"tit",attrs:{rowspan:"2"}},[t._v("合计")]),n("td",{staticClass:"total",attrs:{colspan:"4"}},[t._v("USD："+t._s(t.info.usd||0))])]),n("tr",[n("td",{staticClass:"total",attrs:{colspan:"4"}},[t._v("CNY："+t._s(t.info.cny||0))])])],2)])])]),t._m(9)]),n("div",{staticClass:"operate-wrap"},[n("button",{directives:[{name:"preventReClick",rawName:"v-preventReClick",value:3e3,expression:"3000"}],staticClass:"btn capture",on:{click:t.handleCapture}},[t._v("保存并生成报价单")])])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("img",{staticClass:"icon",attrs:{src:i("d6f7"),alt:"address"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("img",{staticClass:"icon",attrs:{src:i("9b35"),alt:"mail"}}),n("span",{staticClass:"tit"},[t._v("致/TO：")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("img",{staticClass:"icon",attrs:{src:i("430c"),alt:"date"}}),n("span",{staticClass:"tit"},[t._v("时间/Date：")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("img",{staticClass:"icon",attrs:{src:i("cdf9"),alt:"from"}}),n("span",{staticClass:"tit"},[t._v("自/From：")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("img",{staticClass:"icon",attrs:{src:i("1ed2"),alt:"phone"}}),n("span",{staticClass:"tit"},[t._v("电话/微信：")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("th",[t._v("箱型")]),i("th",[t._v("数量")]),i("th",[t._v("货重(KGS)")]),i("th",[t._v("重柜")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("th",[t._v("收费项")]),i("th",[t._v("20GP")]),i("th",[t._v("40GP")]),i("th",[t._v("40HQ")]),i("th",[t._v("小计")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("td",[i("span",[t._v("仓储费")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("td",[i("span",[t._v("其它费")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"remark common-wrap"},[i("div",{staticClass:"title"},[t._v("备注/Remarks:")]),i("div",{staticClass:"content"},[i("div",[t._v("1、以上报价只适用于普通货物(非危险品或其他特殊货物)")]),i("div",[t._v("2、付款方式: 票结、月结")]),i("div",[t._v("3、如阁下所计划装载货物为20'GP, 则须知以下关于货物重量条款: ")]),i("div",[t._v("货物毛重(不包含集装箱重量) ≧ 18 tons: USD 150")]),i("div",[t._v("货物毛重(不包含集装箱重量) ≧ 21 tons: USD 250")]),i("div",{staticClass:"tit"},[t._v("温馨提示：")]),i("div",[t._v("由于运价和舱位变动频繁，敬请关注运价的有效期限，以及在订舱前致电我司确认运价及舱位事宜，")]),i("div",[t._v("订舱时，请将运价及相关船公司和船期等资料在订舱单上注明，以便阁下货物如期出运。多谢支持。")])])])}],a=i("18a0"),o=i.n(a),r=i("c0e9"),c=i.n(r),l=i("f262"),p=i("b775"),u=i("ed08"),f={name:"Quotation",data(){return{id:"",token:"",active:"",configData:{},showToDate:!1,showCloseTime:!1,showRangeTime:!1,company_logo:i("a1d8"),info:{id:"",company_logo:"",company_name_zh:"",company_name_cn:"",company_address:"",to:"",to_date:"",from:"",phone:"",start_port_id:"",start_port:"",end_port_id:"",end_port:"",ship_company:"",close_time:"",start_time:"",end_time:"",gp20:"",gp20_count:"",gp20_weight:"",gp20_is_w:0,gp40:"",gp40_count:"",gp40_weight:"",gp40_is_w:0,hq40:"",hq40_count:"",hq40_weight:"",hq40_is_w:0,price_json:{transPrice:{gp20:0,gp40:0,hp40:0,sum:0},portSurcharge:[],companySurcharge:[],carPrice:{gp20:0,gp40:0,hp40:0,sum:0},customerPrice:{gp20:0,gp40:0,hp40:0,sum:0},storagePrice:{gp20:0,gp40:0,hp40:0,sum:0},otherPrice:{gp20:0,gp40:0,hp40:0,sum:0}},usd:0,cny:0},usdSurcharge:0,cnySurcharge:0}},created(){this.id=this.$route.query.id||"",this.token=this.$route.query.token||"",this.$store.commit("user/SET_TOKEN",this.token)},async mounted(){document.addEventListener("WeixinJSBridgeReady",(function(){o.a.miniProgram.getEnv((function(t){console.log("当前环境："+JSON.stringify(t))}))})),this.initData()},methods:{initData(){p["a"].getInfo({id:this.id}).then(t=>{let e=t.data;e.company_logo&&Object(u["a"])(l["a"].staticUrl+e.company_logo).then(t=>{this.company_logo=t});for(const i in e)if(Object.hasOwnProperty.call(this.info,i)){const t=e[i];"price_json"!==i&&null!==t&&(this.info[i]=t)}if(e.price_json)for(const i in e["price_json"])if(Object.hasOwnProperty.call(e["price_json"],i)){const t=e["price_json"][i];if("transPrice"===i||"carPrice"===i||"customerPrice"===i||"otherPrice"===i)for(const e in t)Object.hasOwnProperty.call(this.info["price_json"][i],e)&&(this.info["price_json"][i][e]=t[e]);else null!==t&&(this.info["price_json"][i]=t)}this.info.to_date||(this.info.to_date=parseInt((new Date).getTime()/1e3))})},formatDate(t){return t?Object(u["b"])(t):""},handleToDate(t){this.info.to_date=parseInt(new Date(t).getTime()/1e3),this.showToDate=!1},handleCloseTime(t){this.info.close_time=parseInt(new Date(t).getTime()/1e3),this.showCloseTime=!1},handleRangeTime(t){t[0]&&t[1]&&(this.info.start_time=parseInt(new Date(t[0]).getTime()/1e3),this.info.end_time=parseInt(new Date(t[1]).getTime()/1e3),this.showRangeTime=!1)},handleLog(){o.a.miniProgram.navigateTo({url:"/pages/chuancang/baojia/log"})},queryPrice(t){this.handleSave(),this.active=t,"yunjia"===t&&this.info.start_port_id&&this.info.end_port_id?o.a.miniProgram.navigateTo({url:"/pages/chuancang/dingcang/priceList?start_port_id="+this.info.start_port_id+"&end_port_id="+this.info.end_port_id}):(o.a.miniProgram.switchTab({url:"/pages/chuancang/index/index"}),o.a.miniProgram.postMessage({data:{active:t}}))},calcTransPrice(){let t=parseFloat(this.info.gp20)||0,e=parseFloat(this.info.gp40)||0,i=parseFloat(this.info.hq40)||0;if(t||e||i){if(!this.info.id){const t=(parseFloat(this.info.gp20)||0)*(Number(this.info.gp20_count)||0)+(parseFloat(this.info.gp40)||0)*(Number(this.info.gp40_count)||0)+(parseFloat(this.info.hq40)||0)*(Number(this.info.hq40_count)||0);this.info.price_json.transPrice.sum=t}this.getSurcharge()}},subTotal(t,e){if("portSurcharge"==e||"companySurcharge"==e){let i=parseFloat(this.info.price_json[e][t].list.gp20)||0,n=parseFloat(this.info.price_json[e][t].list.gp40)||0,s=parseFloat(this.info.price_json[e][t].list.hq40)||0;this.info.price_json[e][t].list.sum=parseFloat(i+n+s)}else{let t=parseFloat(this.info.price_json[e].gp20)||0,i=parseFloat(this.info.price_json[e].gp40)||0,n=parseFloat(this.info.price_json[e].hq40)||0;this.info.price_json[e].sum=parseFloat(t+i+n)}this.calcSurcharge()},getSurcharge(){this.info.id?p["a"].getSurcharge({id:this.info.id,gp20:Number(this.info.gp20_count)||0,gp40:Number(this.info.gp40_count)||0,hq40:Number(this.info.hq40_count)||0}).then(t=>{let e=t.data;this.info.cny=e.cny,this.info.usd=e.usd,this.info.price_json=e.price_json}):this.calcSurcharge()},calcSurcharge(){let t=0,e=0;this.info.price_json.portSurcharge.forEach(i=>{"usd"==i.unit?t+=parseFloat(i.list.sum)||0:"cny"==i.unit&&(e+=parseFloat(i.list.sum)||0)}),this.info.price_json.companySurcharge.forEach(i=>{"usd"==i.unit?t+=parseFloat(i.list.sum)||0:"cny"==i.unit&&(e+=parseFloat(i.list.sum)||0)}),this.usdSurcharge=t,this.cnySurcharge=e,this.calcTotal()},calcTotal(){let t=0;t+=parseFloat(this.info.price_json.carPrice.sum)||0,t+=parseFloat(this.info.price_json.customerPrice.sum)||0,t+=parseFloat(this.info.price_json.otherPrice.sum)||0,this.info.cny=t+parseFloat(this.cnySurcharge);let e=parseFloat(this.info.price_json.transPrice.sum)||0,i=parseFloat(this.info.price_json.storagePrice.sum)||0;this.info.usd=parseFloat(e)+parseFloat(i)+parseFloat(this.usdSurcharge)},handleLogo(t){const e=new FormData;e.append("image",t.file),p["a"].uploadFile(e).then(t=>{let e=t.data;e&&(this.info.company_logo=e,Object(u["a"])(l["a"].staticUrl+e).then(t=>{this.company_logo=t,this.$toast("上传成功")}))})},handleSave(){let t=Object.assign({},this.info);t.status=2,p["a"].updateQuote(t)},async handleCapture(){let t=Object.assign({},this.info);await p["a"].updateQuote(t);const e=this.$refs.content;c()(e,{backgroundColor:"#f1f1f1",useCORS:!0}).then(t=>{const e=t.toDataURL("image/png");o.a.miniProgram.postMessage({data:{imageData:e}}),o.a.miniProgram.navigateBack({delta:1})})}}},d=f,h=i("2877"),_=Object(h["a"])(d,n,s,!1,null,null,null);e["default"]=_.exports}}]);